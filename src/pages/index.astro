---
// File: src/pages/index.astro
// PERBAIKAN DIAGNOSTIK: Hanya merender komponen tes isolasi.

import MainLayout from '../layouts/MainLayout.astro';
// 1. Impor komponen tes baru kita
import SsrTest from '../components/SsrTest.jsx';

// Kita komentari semua pengambilan data lama untuk memastikan tes ini murni
// let { data: products } = await supabase.from('products').select('*').limit(10);
---

<MainLayout title="Beranda - BJS RACING STORE">
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-4">Halaman Tes Isolasi</h1>
    <p class="mb-8">Kita sedang menguji apakah impor Supabase Client menyebabkan server crash.</p>
    
    {/* 2. Render HANYA komponen tes.
        Direktif client:load akan memaksa Astro untuk memuat JS-nya di browser.
        Jika server crash sebelum ini, masalahnya ada pada saat Astro mencoba mengimpor file di server.
    */}
    <SsrTest client:load />

    {/* Semua konten halaman beranda lama dinonaktifkan sementara */}
    <!-- 
      ... (Konten lama halaman beranda Anda ada di sini, dikomentari) ...
    -->
  </div>
</MainLayout>